# sense_to_vow_initial_filled_from_user.xlsx の説明

## 概要

`sense_to_vow_initial_filled_from_user.xlsx` は、**「絵馬の文章 → 願いの方向（誓願）」を数理でつなぐ中核データ**です。

このファイルは、8つの感覚（迷い/焦り/静けさ/内省/行動/つながり/挑戦/待つ）から12の誓願（誓願01〜12）への「つながりの強さ」（重み）を定義します。

## ファイルの構造

### 行列サイズ
- **行**: 8つの感覚
- **列**: 12の誓願（誓願01〜12）
- **サイズ**: 8×12

### 感覚（行）
1. **迷い** (Mayoi)
2. **焦り** (Aseri)
3. **静けさ** (Shizukesa)
4. **内省** (Naisei)
5. **行動** (Kōdō)
6. **つながり** (Tsunagari)
7. **挑戦** (Chōsen)
8. **待つ** (Matsu)

### 誓願（列）
1. **誓願01**: 一歩の地図
2. **誓願02**: 静けさと整え
3. **誓願03**: 誠の芯
4. **誓願04**: 流れに乗る
5. **誓願05**: 縁を結ぶ
6. **誓願06**: 知恵を増幅
7. **誓願07**: 冷静な判断
8. **誓願08**: 再起と修復
9. **誓願09**: 自己表現の
10. **誓願10**: 記憶の棚卸
11. **誓願11**: 共鳴と本質
12. **誓願12**: 即断・実行

## 値の意味

| 値 | 意味 |
|----|------|
| **-0.4** | 強い相性（3） |
| **-0.2** | やや相性（-） |
| **0** | 中立 |
| **0.2** | 抑制（選ばれにくい） |

### 値の解釈

- **負の値（例：-0.4）**: その感覚がその誓願を**引き寄せる**（相性が良い）→ エネルギーを下げる
- **正の値（例：+0.2）**: その感覚がその誓願を**離す**（相性が悪い）→ エネルギーを上げる
- **0**: 中立（影響なし）

## QUBOでの使用

### 相互作用項

この行列は、QUBOの相互作用項として使用されます：

```
H_sense-vow = Σ_{i,j} W_{ij} x_i v_j
```

- **W_{ij}**: `sense_to_vow_matrix[i, j]` = 感覚iが誓願jを引き寄せる強さ
- **x_i**: 感覚ベクトルの要素（連続値0〜5、またはバイナリ）
- **v_j**: 誓願変数（バイナリ、one-hot制約により1つだけ1）

### 処理の流れ

1. **ユーザー入力** → Mood → 感覚ベクトル x（8次元、連続値0〜5）
2. **x（感覚）→ v（誓願）** を引き寄せる
   - `H_sense-vow = Σ_{i,j} W_{ij} x_i v_j` を計算
   - 負の値が多い誓願ほど、エネルギーが低くなり選ばれやすい
3. **v（誓願）→ c（キャラ）** を引き寄せる（k行列を使用）
4. **QUBOで最終決定**（one-hot制約により、誓願1つ、キャラ1体が選ばれる）

## この行列を使うと何ができる？

### 1. ユーザーの感覚スコアから「誓願」を自動推定

ユーザーがスライダーで付けた感覚ベクトル x（0〜5）から、誓願 v（12のうちどれが自然か）を導けます。

**イメージ：**
- 迷いが強い（x0 = 4.0）→ 誓願05/07/10が呼ばれやすい（sense_to_vow行列の値による）
- 静けさが強い（x2 = 3.5）→ 誓願02/11が呼ばれやすい

### 2. 「文章補助」と相性が抜群

絵馬の文章から抽出したキーワードで「迷い +1」「待つ +1」みたいに x を少し補正しても、この行列があると **「補正が誓願にどう効くか」が数理的に反映されます**。

### 3. 12神（キャラ）選定まで一直線

他のファイルとつなげると：

1. **感覚 x → 誓願 v**（このファイル：`sense_to_vow_initial_filled_from_user.xlsx`）
2. **誓願 v → キャラ c**（`akiba12_character_to_vow_K.xlsx`）
3. **キャラ c → 口調/性格軸**（`akiba12_character_to_axis_L.xlsx`）
4. **キャラ表示文**（`akiba12_character_list.xlsx`）

…が **一本の流れ**になります。

## QUBOとして使う場合

このファイルは、QUBOの **「相互作用項」** を具体数値で埋める材料です。

- **x × v（感覚×誓願）の係数**が、この表の値 `W_{ij}`
- **one-hot制約**で「誓願は1つ」を保証
- **低エネルギー帯をサンプリング**すると「候補の誓願」が複数出る
- → 神託らしい**"揺らぎ"**になる

### QUBOの構造

```
E(x, v, c) = H_sense(x) + H_vow(v) + H_char(c) + H_interaction(x, v, c)
```

**H_interaction の一部：**
```
H_sense-vow = Σ_{i,j} W_{ij} x_i v_j
```

- **W_{ij}**: `sense_to_vow_matrix[i, j]`
- **x_i**: 感覚ベクトル（連続値0〜5、またはバイナリ）
- **v_j**: 誓願変数（バイナリ、one-hot制約）

## まとめ

`sense_to_vow_initial_filled_from_user.xlsx` は：

- **「絵馬の文章 → 願いの方向（誓願）」を数理でつなぐ中核データ**
- **QUBOの相互作用項を具体数値で埋める材料**
- **感覚スコアから誓願を自動推定するための重み行列**
- **12神選定まで一直線にする流れの第一段階**

このファイルを追加することで、ユーザーの感覚に応じた、より自然な誓願選択が可能になります。